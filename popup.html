<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=400, initial-scale=1.0">
  <title>Resume Tailor</title>
  <link rel="stylesheet" href="popup.css">
  <link rel="stylesheet" href="quality-styles.css">
  <script src="config.js"></script>
  <script src="api-config.js"></script>
  <style>
    html, body {
      width: 400px !important;
      min-width: 400px !important;
      height: 600px !important;
      min-height: 600px !important;
      max-height: 600px !important;
      margin: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }
  </style>
</head>
<body>
  <div class="popup-wrapper">
    <div class="container">
    <header class="header">
      <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
        <h1 style="margin: 0;">Resume Tailor</h1>
        <div id="header-menu" style="display: none; position: relative;">
          <button id="menu-toggle-btn" style="background: none; border: none; cursor: pointer; padding: 5px; display: flex; align-items: center; gap: 5px; color: #6b7280; font-size: 14px;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
            Menu
          </button>
          <div id="menu-dropdown" class="menu-dropdown hidden">
            <a href="#" id="menu-home" class="menu-item" data-tooltip="Home">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
            </a>
            <a href="#" id="menu-last-generated" class="menu-item" data-tooltip="Last Generated Content">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </a>
            <a href="#" id="menu-settings" class="menu-item" data-tooltip="Resume Settings">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
      <div id="user-info" style="display: none; font-size: 12px; color: #6b7280; margin-top: 5px;">
        <span id="user-name"></span> | <a href="#" id="logout-link" style="color: #3b82f6; cursor: pointer;">Logout</a>
      </div>
    </header>

    <!-- Auth Section -->
    <div id="auth-section" class="section hidden">
      <h2>Welcome to Resume Tailor</h2>
      <p class="subtitle">Sign in to continue or create an account</p>
      
      <div id="login-form">
        <h3 style="font-size: 16px; margin-bottom: 15px;">Login</h3>
        <input type="email" id="login-email" placeholder="Email" class="input">
        <div class="password-input-wrapper">
          <input type="password" id="login-password" placeholder="Password" class="input">
          <button type="button" class="password-toggle" data-target="login-password" aria-label="Toggle password visibility">
            <svg class="eye-icon eye-open" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <svg class="eye-icon eye-closed" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
              <line x1="1" y1="1" x2="23" y2="23"></line>
            </svg>
          </button>
        </div>
        <button id="login-btn" class="btn btn-primary">Sign In</button>
        
        <p style="text-align: center; margin-top: 15px; font-size: 14px;">
          Don't have an account? <a href="#" id="show-register" style="color: #3b82f6; cursor: pointer;">Sign Up</a>
        </p>
      </div>
      
      <div id="register-form" style="display: none;">
        <h3 style="font-size: 16px; margin-bottom: 15px;">Create Account</h3>
        <input type="text" id="register-name" placeholder="Name" class="input">
        <input type="email" id="register-email" placeholder="Email" class="input">
        <div class="password-input-wrapper">
          <input type="password" id="register-password" placeholder="Password (min 8 characters)" class="input">
          <button type="button" class="password-toggle" data-target="register-password" aria-label="Toggle password visibility">
            <svg class="eye-icon eye-open" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <svg class="eye-icon eye-closed" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
              <line x1="1" y1="1" x2="23" y2="23"></line>
            </svg>
          </button>
        </div>
        <div class="password-input-wrapper">
          <input type="password" id="register-password-confirm" placeholder="Confirm Password" class="input">
          <button type="button" class="password-toggle" data-target="register-password-confirm" aria-label="Toggle password visibility">
            <svg class="eye-icon eye-open" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <svg class="eye-icon eye-closed" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
              <line x1="1" y1="1" x2="23" y2="23"></line>
            </svg>
          </button>
        </div>
        <button id="register-btn" class="btn btn-primary">Create Account</button>
        
        <p style="text-align: center; margin-top: 15px; font-size: 14px;">
          Already have an account? <a href="#" id="show-login" style="color: #3b82f6; cursor: pointer;">Sign In</a>
        </p>
      </div>
      
      <div id="auth-error" style="display: none; color: #ef4444; font-size: 14px; margin-top: 10px; text-align: center;"></div>
    </div>

    <!-- Upload Section -->
    <div id="upload-section" class="section hidden">
      <h2>Upload Your Resume</h2>
      <p class="subtitle">Upload once, tailor unlimited</p>
      
      <div class="upload-area" id="upload-area">
        <input type="file" id="resume-file" accept=".pdf,.docx" hidden>
        <div class="upload-box" id="upload-box">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <p>Click to upload</p>
          <p class="file-info">PDF or DOCX (max 5MB)</p>
        </div>
        <div id="upload-status" class="upload-status hidden"></div>
      </div>

      <button id="upload-btn" class="btn btn-primary" disabled>Upload Resume</button>
    </div>

    <!-- Ready Section (Home Page) -->
    <div id="ready-section" class="section hidden">
      <!-- Welcome Section -->
      <div class="home-welcome">
        <div class="home-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
        </div>
        <h2 class="home-title">Welcome to Resume Tailor</h2>
        <p class="home-subtitle">AI-powered resume customization for every job application</p>
      </div>

      <!-- Stats Cards -->
      <div class="home-stats">
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value" id="stat-resumes">0</div>
            <div class="stat-label">Resumes</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value" id="stat-generated">0</div>
            <div class="stat-label">Generated</div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="home-actions">
        <button id="home-generate-btn" class="home-action-btn primary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
          <span>Generate Tailored Resume</span>
        </button>
        <button id="home-settings-btn" class="home-action-btn secondary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"></path>
          </svg>
          <span>Manage Resumes</span>
        </button>
      </div>

      <!-- App Info -->
      <div class="home-info">
        <h3>How It Works</h3>
        <div class="info-steps">
          <div class="info-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <strong>Highlight</strong> a job description on any job posting
            </div>
          </div>
          <div class="info-step">
            <div class="step-number">2</div>
            <div class="step-content">
              <strong>Right-click</strong> â†’ "Tailor resume to this role"
            </div>
          </div>
          <div class="info-step">
            <div class="step-number">3</div>
            <div class="step-content">
              <strong>View</strong> your tailored content instantly
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tailor Section -->
    <div id="tailor-section" class="section hidden">
      <div class="tailor-header">
        <h2>Tailor Your Resume</h2>
        <p class="tailor-subtitle">Customize your resume to match the job description</p>
      </div>
      
      <div id="job-description-preview" class="job-preview">
        <div class="job-preview-header">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
          <p class="label">Job Description</p>
        </div>
        <p id="job-text" class="job-text"></p>
      </div>

      <div class="toggle-row" style="display: flex; gap: 8px; margin-top: 8px; align-items: center; flex-wrap: nowrap;">
        <div class="toggle-card" style="flex: 1; padding: 6px 8px; min-width: 0;">
          <div class="toggle-content">
            <div class="toggle-header" style="display: flex; align-items: center; justify-content: space-between; gap: 6px;">
              <div style="display: flex; align-items: center; gap: 4px; min-width: 0; flex: 1;">
                <strong style="font-size: 11px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">100% Match</strong>
                <span title="Let AI add missing skills and keywords from the job description to aim for 100% match." style="font-size: 10px; color: #6b7280; cursor: help; flex-shrink: 0;">&#9432;</span>
              </div>
              <label class="toggle-switch" style="flex-shrink: 0;">
                <input type="checkbox" id="generate-freely-toggle">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="toggle-card" style="flex: 1; padding: 6px 8px; min-width: 0;">
          <div class="toggle-content">
            <div class="toggle-header" style="display: flex; align-items: center; justify-content: space-between; gap: 6px;">
              <div style="display: flex; align-items: center; gap: 4px; min-width: 0; flex: 1;">
                <strong style="font-size: 11px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Custom Mode</strong>
                <span title="Write your own instructions, like telling the AI what to emphasize or change." style="font-size: 10px; color: #6b7280; cursor: help; flex-shrink: 0;">&#9432;</span>
              </div>
              <label class="toggle-switch" style="flex-shrink: 0;">
                <input type="checkbox" id="custom-mode-toggle">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div id="custom-instructions-container" class="hidden" style="margin-top: 12px;">
        <label for="custom-instructions" style="display: block; font-size: 13px; font-weight: 500; color: #374151; margin-bottom: 8px;">
          Your Instructions
        </label>
        <textarea 
          id="custom-instructions" 
          placeholder="Example: Make the resume more technical, emphasize leadership experience, add more metrics, focus on cloud technologies..."
          style="width: 100%; min-height: 100px; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 13px; font-family: inherit; resize: vertical; background: #ffffff;"
        ></textarea>
        <p style="font-size: 12px; color: #6b7280; margin-top: 6px;">
          Describe how you want your resume to be tailored. The AI will use these instructions along with the job description.
        </p>
      </div>

      <button id="tailor-btn" class="btn btn-primary tailor-generate-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
        </svg>
        <span>Generate Tailored Content</span>
      </button>
    </div>

    <!-- Results Section -->
    <div id="results-section" class="section hidden">
      <div class="section-header">
        <h2 class="section-title">Your Tailored Content</h2>
        <p class="section-subtitle">Review and download your customized resume and cover letter</p>
        <div class="header-divider"></div>
      </div>

      <!-- Quality & Similarity Scores -->
      <div id="quality-scores" class="quality-scores-container hidden">
        <div class="score-card similarity-score">
          <div class="score-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
          </div>
          <div class="score-content">
            <div class="score-label">Match Score</div>
            <div class="score-value" id="similarity-score-value">--</div>
            <div class="score-description" id="similarity-description">Calculating...</div>
          </div>
        </div>
        <div class="score-card quality-score">
          <div class="score-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
            </svg>
          </div>
          <div class="score-content">
            <div class="score-label">Quality Score</div>
            <div class="score-value" id="quality-score-value">--</div>
            <div class="score-description" id="quality-description">Calculating...</div>
          </div>
        </div>
      </div>

      <!-- Regenerate Button (shown when scores are low) -->
      <div id="regenerate-section" class="regenerate-section hidden">
        <div class="regenerate-card">
          <div class="regenerate-content">
            <div class="regenerate-text">
              <strong>Enhance Your Resume</strong>
              <p>Your resume can be improved to better match the job requirements. Click to regenerate with missing keywords and optimizations added.</p>
            </div>
            <button id="regenerate-btn" class="btn-regenerate">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
              <span>Regenerate</span>
            </button>
          </div>
        </div>
      </div>

      <!-- ATS Keywords Display -->
      <div id="ats-keywords" class="ats-keywords-container hidden">
        <div class="ats-header">
          <h4>ATS Keywords</h4>
          <button id="toggle-ats-highlight" class="btn-toggle-ats">Highlight in Resume</button>
        </div>
        <div class="ats-keywords-list">
          <div class="keywords-matched">
            <span class="keyword-label">Matched:</span>
            <div id="matched-keywords" class="keywords-tags"></div>
          </div>
          <div class="keywords-missing">
            <span class="keyword-label">Missing:</span>
            <div id="missing-keywords" class="keywords-tags"></div>
          </div>
        </div>
      </div>

      <!-- Quality Warnings -->
      <div id="quality-warnings" class="quality-warnings hidden"></div>

      <!-- Full Document Preview -->
      <div class="result-card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
          <h3 style="margin: 0;">Tailored Resume</h3>
          <button id="expand-resume-btn" class="expand-btn" data-target="resume" data-tooltip="Expand Editor">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
            </svg>
          </button>
        </div>
        <textarea id="full-document-content" class="content-box editable-content" style="white-space: pre-wrap; font-family: monospace; font-size: 11px; width: 100%; min-height: 200px; padding: 10px; border: 1px solid #e5e7eb; border-radius: 8px; resize: vertical;"></textarea>
        <div style="display: flex; gap: 10px; margin-top: 10px; align-items: center; flex-wrap: wrap;">
          <button class="btn-copy icon-btn" data-target="full-document" data-tooltip="Copy Resume">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
          <div class="download-dropdown" style="position: relative;">
            <button class="btn-download icon-btn" data-tooltip="Download Resume">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
            </button>
            <div class="download-dropdown-menu hidden">
              <button class="download-option" data-format="docx" data-target="resume">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                  <polyline points="14 2 14 8 20 8"></polyline>
                </svg>
                <span>Download as DOCX</span>
              </button>
              <button class="download-option" data-format="pdf" data-target="resume">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                  <polyline points="14 2 14 8 20 8"></polyline>
                </svg>
                <span>Download as PDF</span>
              </button>
            </div>
          </div>
          <div class="template-menu-dropdown" style="position: relative;">
            <button class="btn-more icon-btn" data-tooltip="More Options">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="1"></circle>
                <circle cx="12" cy="5" r="1"></circle>
                <circle cx="12" cy="19" r="1"></circle>
              </svg>
            </button>
            <div class="template-menu hidden" style="position: absolute; top: 100%; left: 0; margin-top: 8px; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); min-width: 180px; z-index: 10000;">
              <div style="padding: 8px 12px; border-bottom: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #6b7280;">Template</div>
              <button class="template-option-menu" data-template="classic" style="width: 100%; padding: 10px 12px; text-align: left; border: none; background: none; cursor: pointer; font-size: 13px; color: #111827; transition: background 0.2s; display: flex; align-items: center; justify-content: space-between;">
                <span>Classic</span>
                <span style="font-size: 11px; color: #6b7280;">ATS-safe</span>
              </button>
              <button class="template-option-menu" data-template="modern" style="width: 100%; padding: 10px 12px; text-align: left; border: none; background: none; cursor: pointer; font-size: 13px; color: #111827; transition: background 0.2s; display: flex; align-items: center; justify-content: space-between; border-top: 1px solid #f3f4f6;">
                <span>Modern</span>
                <span style="font-size: 11px; color: #6b7280;">Contemporary</span>
              </button>
              <button class="template-option-menu" data-template="compact" style="width: 100%; padding: 10px 12px; text-align: left; border: none; background: none; cursor: pointer; font-size: 13px; color: #111827; transition: background 0.2s; display: flex; align-items: center; justify-content: space-between; border-top: 1px solid #f3f4f6;">
                <span>Compact</span>
                <span style="font-size: 11px; color: #6b7280;">One-page</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Cover Letter -->
      <div class="result-card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
          <h3 style="margin: 0;">Cover Letter</h3>
          <button id="expand-cover-letter-btn" class="expand-btn" data-target="cover-letter" data-tooltip="Expand Editor">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
            </svg>
          </button>
        </div>
        <textarea id="cover-letter-content" class="content-box editable-content" style="white-space: pre-wrap; font-family: monospace; font-size: 11px; width: 100%; min-height: 150px; padding: 10px; border: 1px solid #e5e7eb; border-radius: 8px; resize: vertical;"></textarea>
        <div style="display: flex; gap: 10px; margin-top: 10px; align-items: center;">
          <button class="btn-copy icon-btn" data-target="cover-letter" data-tooltip="Copy Cover Letter">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>
      </div>

      <div class="actions">
        <button id="new-tailor-btn" class="btn btn-primary">Tailor Another Role</button>
      </div>
    </div>

    <!-- Error Section -->
    <div id="error-section" class="section hidden">
      <div class="status-card error">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <p id="error-message"></p>
      </div>
      <button id="retry-btn" class="btn btn-primary">Try Again</button>
    </div>

    <!-- Settings Section -->
    <div id="settings-section" class="section hidden">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="margin: 0;">Resume Management</h2>
        <button id="settings-back-btn" class="btn btn-secondary" style="width: auto; padding: 8px 16px;">Back</button>
      </div>

      <!-- Upload New Resume -->
      <div class="settings-upload-area" style="margin-bottom: 25px; padding: 20px; background: #f9fafb; border-radius: 12px; border: 2px dashed #d1d5db;">
        <h3 style="font-size: 16px; margin-bottom: 15px; color: #111827;">Upload New Resume</h3>
        <div id="settings-upload-box" class="upload-box" style="margin: 0; padding: 20px; background: #ffffff; border: 1px solid #e5e7eb;">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: #6b7280; margin-bottom: 10px;">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <p style="font-size: 14px; color: #374151; margin: 5px 0;">Click to upload</p>
          <p class="file-info" style="font-size: 12px; color: #6b7280;">PDF or DOCX (max 5MB)</p>
          <input type="file" id="settings-resume-file" accept=".pdf,.doc,.docx" style="display: none;">
        </div>
        <div id="settings-upload-status" class="upload-status hidden" style="margin-top: 10px;"></div>
      </div>

      <!-- Template Selection -->
      <div class="template-selection" style="margin-bottom: 25px; padding: 20px; background: #ffffff; border-radius: 12px; border: 1px solid #e5e7eb;">
        <h3 style="font-size: 16px; margin-bottom: 15px; color: #111827;">Resume Template</h3>
        <p style="font-size: 13px; color: #6b7280; margin-bottom: 15px;">Choose your default template style. This will be used for all resume downloads and previews.</p>
        <div class="template-options" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
          <button class="template-option" data-template="classic" style="padding: 16px; border: 2px solid #e5e7eb; border-radius: 8px; background: #ffffff; cursor: pointer; text-align: center; transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 8px; color: #111827;">Classic</div>
            <div style="font-size: 12px; color: #6b7280;">ATS-safe, traditional</div>
          </button>
          <button class="template-option" data-template="modern" style="padding: 16px; border: 2px solid #e5e7eb; border-radius: 8px; background: #ffffff; cursor: pointer; text-align: center; transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 8px; color: #111827;">Modern</div>
            <div style="font-size: 12px; color: #6b7280;">Clean, contemporary</div>
          </button>
          <button class="template-option" data-template="compact" style="padding: 16px; border: 2px solid #e5e7eb; border-radius: 8px; background: #ffffff; cursor: pointer; text-align: center; transition: all 0.2s;">
            <div style="font-weight: 600; margin-bottom: 8px; color: #111827;">Compact</div>
            <div style="font-size: 12px; color: #6b7280;">Dense, one-page</div>
          </button>
        </div>
      </div>

      <!-- Tabs -->
      <div class="settings-tabs" style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb;">
        <button id="tab-resumes" class="settings-tab active" style="padding: 10px 16px; background: none; border: none; border-bottom: 2px solid #3b82f6; color: #3b82f6; font-weight: 500; cursor: pointer; font-size: 14px;">
          Your Resumes
        </button>
        <button id="tab-versions" class="settings-tab" style="padding: 10px 16px; background: none; border: none; border-bottom: 2px solid transparent; color: #6b7280; font-weight: 500; cursor: pointer; font-size: 14px;">
          Resume Versions
        </button>
      </div>

      <!-- Resumes Tab Content -->
      <div id="tab-resumes-content" class="tab-content">
        <div id="settings-resumes-list-container">
          <!-- Bulk Actions -->
          <div id="bulk-actions" class="bulk-actions hidden" style="margin-bottom: 15px; padding: 12px; background: #f9fafb; border-radius: 8px; display: flex; align-items: center; justify-content: space-between;">
            <span id="selected-count" style="font-size: 14px; color: #374151; font-weight: 500;"></span>
            <button id="bulk-delete-btn" class="icon-btn danger" data-tooltip="Delete Selected">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </button>
          </div>
          
          <!-- Pagination Top -->
          <div id="settings-pagination-top" class="pagination hidden" style="margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
            <div id="pagination-info-top" style="font-size: 13px; color: #6b7280;"></div>
            <div style="display: flex; gap: 8px;">
              <button id="pagination-prev-top" class="icon-btn" data-tooltip="Previous Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <button id="pagination-next-top" class="icon-btn" data-tooltip="Next Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="resumes-table-wrapper">
            <table class="resumes-table" id="settings-resumes-table">
              <thead>
                <tr>
                  <th style="width: 5%;">
                    <input type="checkbox" id="select-all-checkbox" style="cursor: pointer;" title="Select All">
                  </th>
                  <th style="width: 50%;">Name</th>
                  <th style="width: 45%;">Actions</th>
                </tr>
              </thead>
              <tbody id="settings-resumes-tbody">
                <!-- Resumes will be loaded here -->
              </tbody>
            </table>
          </div>
          
          <!-- Pagination -->
          <div id="settings-pagination" class="pagination hidden" style="margin-top: 15px; display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
            <div id="pagination-info" style="font-size: 13px; color: #6b7280;"></div>
            <div style="display: flex; gap: 8px;">
              <button id="pagination-prev" class="icon-btn" data-tooltip="Previous Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <button id="pagination-next" class="icon-btn" data-tooltip="Next Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="empty-state hidden" id="settings-empty-state" style="text-align: center; padding: 40px 20px; color: #6b7280;">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="opacity: 0.5; margin: 0 auto 15px;">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            <p>No resumes uploaded yet</p>
          </div>
        </div>
      </div>

      <!-- Versions Tab Content -->
      <div id="tab-versions-content" class="tab-content hidden">
        <div id="settings-versions-list-container">
          <!-- Versions Bulk Actions -->
          <div id="versions-bulk-actions" class="bulk-actions hidden" style="margin-bottom: 15px; padding: 12px; background: #f9fafb; border-radius: 8px; display: flex; align-items: center; justify-content: space-between;">
            <span id="versions-selected-count" style="font-size: 14px; color: #374151; font-weight: 500;"></span>
            <button id="versions-bulk-delete-btn" class="icon-btn danger" data-tooltip="Delete Selected">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </button>
          </div>
          
          <!-- Versions Pagination Top -->
          <div id="versions-pagination-top" class="pagination hidden" style="margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
            <div id="versions-pagination-info-top" style="font-size: 13px; color: #6b7280;"></div>
            <div style="display: flex; gap: 8px;">
              <button id="versions-pagination-prev-top" class="icon-btn" data-tooltip="Previous Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <button id="versions-pagination-next-top" class="icon-btn" data-tooltip="Next Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="resumes-table-wrapper">
            <table class="resumes-table" id="settings-versions-table">
              <thead>
                <tr>
                  <th style="width: 5%;">
                    <input type="checkbox" id="select-all-versions-checkbox" style="cursor: pointer;" title="Select All">
                  </th>
                  <th style="width: 30%;">Resume</th>
                  <th style="width: 30%;">Version Name</th>
                  <th style="width: 35%;">Actions</th>
                </tr>
              </thead>
              <tbody id="settings-versions-tbody">
                <!-- Versions will be loaded here -->
              </tbody>
            </table>
          </div>
          
          <!-- Versions Pagination -->
          <div id="versions-pagination" class="pagination hidden" style="margin-top: 15px; display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f9fafb; border-radius: 8px;">
            <div id="versions-pagination-info" style="font-size: 13px; color: #6b7280;"></div>
            <div style="display: flex; gap: 8px;">
              <button id="versions-pagination-prev" class="icon-btn" data-tooltip="Previous Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <button id="versions-pagination-next" class="icon-btn" data-tooltip="Next Page" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="empty-state hidden" id="settings-versions-empty-state" style="text-align: center; padding: 40px 20px; color: #6b7280;">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="opacity: 0.5; margin: 0 auto 15px;">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
            </svg>
            <p>No resume versions found</p>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>

  <!-- Expanded Rich Text Editor Overlay -->
  <div id="expanded-editor-overlay" class="expanded-editor-overlay hidden">
    <div class="expanded-editor-container">
      <div class="expanded-editor-header">
        <h3 id="expanded-editor-title" class="expanded-editor-title">Edit Resume</h3>
        <button id="expanded-editor-close" class="expanded-editor-close" aria-label="Close editor">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="expanded-editor-toolbar" id="expanded-editor-toolbar">
        <div class="editor-toolbar-group">
          <button class="toolbar-btn" data-command="formatBlock" data-value="p" title="Paragraph">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
          </button>
          <button class="toolbar-btn" data-command="formatBlock" data-value="h2" title="Heading">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
              <path d="M6 12h9"></path>
              <path d="M6 20h12"></path>
            </svg>
          </button>
        </div>
        <div class="editor-toolbar-group">
          <button class="toolbar-btn" data-command="bold" title="Bold">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
              <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
            </svg>
          </button>
          <button class="toolbar-btn" data-command="italic" title="Italic">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="19" y1="4" x2="10" y2="4"></line>
              <line x1="14" y1="20" x2="5" y2="20"></line>
              <line x1="15" y1="4" x2="9" y2="20"></line>
            </svg>
          </button>
          <button class="toolbar-btn" data-command="underline" title="Underline">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path>
              <line x1="4" y1="21" x2="20" y2="21"></line>
            </svg>
          </button>
        </div>
        <div class="editor-toolbar-group">
          <button class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="8" cy="6" r="1"></circle>
              <circle cx="8" cy="12" r="1"></circle>
              <circle cx="8" cy="18" r="1"></circle>
              <line x1="12" y1="6" x2="20" y2="6"></line>
              <line x1="12" y1="12" x2="20" y2="12"></line>
              <line x1="12" y1="18" x2="20" y2="18"></line>
            </svg>
          </button>
          <button class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="10" y1="6" x2="21" y2="6"></line>
              <line x1="10" y1="12" x2="21" y2="12"></line>
              <line x1="10" y1="18" x2="21" y2="18"></line>
              <line x1="4" y1="6" x2="6" y2="6"></line>
              <line x1="5" y1="5" x2="5" y2="7"></line>
              <path d="M4 12h2l-1 1.5 1.5 1"></path>
              <path d="M4 18h2l-1.5-1.5L6 15"></path>
            </svg>
          </button>
        </div>
        <div class="editor-toolbar-group">
          <button class="toolbar-btn" data-command="justifyLeft" title="Align Left">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="21" y1="10" x2="7" y2="10"></line>
              <line x1="21" y1="6" x2="3" y2="6"></line>
              <line x1="21" y1="14" x2="3" y2="14"></line>
              <line x1="21" y1="18" x2="7" y2="18"></line>
            </svg>
          </button>
          <button class="toolbar-btn" data-command="justifyCenter" title="Align Center">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="10" x2="6" y2="10"></line>
              <line x1="21" y1="6" x2="3" y2="6"></line>
              <line x1="21" y1="14" x2="3" y2="14"></line>
              <line x1="18" y1="18" x2="6" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="editor-toolbar-group">
          <button class="toolbar-btn" data-command="removeFormat" title="Clear Formatting">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 4L6 20"></path>
              <path d="M8 4h10"></path>
              <path d="M16 20h2"></path>
            </svg>
          </button>
        </div>
      </div>
      <div class="expanded-editor-content">
        <div id="expanded-editor-text" class="rich-text-editor" contenteditable="true"></div>
      </div>
      <div class="expanded-editor-footer">
        <button id="expanded-editor-save" class="btn btn-primary">Save Changes</button>
        <button id="expanded-editor-cancel" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Document Preview Overlay -->
  <div id="document-preview-overlay" class="document-preview-overlay hidden">
    <div class="document-preview-container">
      <div class="document-preview-header">
        <h3 id="document-preview-title" class="document-preview-title">Document Preview</h3>
        <button id="document-preview-close" class="document-preview-close" aria-label="Close preview">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="document-preview-content">
        <iframe id="document-preview-iframe" class="document-preview-iframe" frameborder="0"></iframe>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading" class="loading-overlay hidden">
    <div class="loading-content">
      <!-- AI Brain Animation -->
      <div class="ai-brain-container">
        <svg class="ai-brain" width="80" height="80" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <!-- Brain outline -->
          <path class="brain-path" d="M50 15 C35 15, 25 25, 25 40 C20 42, 15 48, 15 55 C15 65, 20 70, 30 72 C28 78, 30 85, 35 88 C40 90, 45 88, 50 85 C55 88, 60 90, 65 88 C70 85, 72 78, 70 72 C80 70, 85 65, 85 55 C85 48, 80 42, 75 40 C75 25, 65 15, 50 15 Z" fill="none" stroke="#3b82f6" stroke-width="2"/>
          <!-- Neural network nodes -->
          <circle class="neural-node" cx="35" cy="35" r="3" fill="#3b82f6">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="1.5s" repeatCount="indefinite"/>
          </circle>
          <circle class="neural-node" cx="50" cy="30" r="3" fill="#3b82f6">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="1.5s" begin="0.3s" repeatCount="indefinite"/>
          </circle>
          <circle class="neural-node" cx="65" cy="35" r="3" fill="#3b82f6">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="1.5s" begin="0.6s" repeatCount="indefinite"/>
          </circle>
          <circle class="neural-node" cx="40" cy="50" r="3" fill="#3b82f6">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="1.5s" begin="0.2s" repeatCount="indefinite"/>
          </circle>
          <circle class="neural-node" cx="60" cy="50" r="3" fill="#3b82f6">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="1.5s" begin="0.5s" repeatCount="indefinite"/>
          </circle>
          <circle class="neural-node" cx="50" cy="65" r="3" fill="#3b82f6">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="1.5s" begin="0.4s" repeatCount="indefinite"/>
          </circle>
          <!-- Scanning lines -->
          <line class="scan-line" x1="20" y1="50" x2="80" y2="50" stroke="#60a5fa" stroke-width="1" opacity="0.4">
            <animate attributeName="y1" values="20;80;20" dur="2s" repeatCount="indefinite"/>
            <animate attributeName="y2" values="20;80;20" dur="2s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.2;0.6;0.2" dur="2s" repeatCount="indefinite"/>
          </line>
        </svg>
      </div>
      
      <!-- Main message -->
      <div class="loading-message-container">
        <p class="loading-main-text" id="loading-main-text">Thinking...</p>
        <p class="loading-sub-text" id="loading-sub-text">Analyzing your resume and job description</p>
      </div>
      
      <!-- Progress dots -->
      <div class="progress-dots">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
    </div>
  </div>

        <script src="api.js"></script>
        <script src="ui.js"></script>
        <script src="auth.js"></script>
        <script src="state-manager.js"></script>
        <script src="tailor-handler.js"></script>
        <script src="download-handler.js"></script>
        <script src="settings-popup.js"></script>
        <script src="quality-display.js"></script>
        <script src="popup.js"></script>
</body>
</html>
